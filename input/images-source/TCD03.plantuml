@startuml
title Test Case D 03
footer Version 1.0
skinparam responseMessageBelowArrow true
skinparam style strictuml
scale max 800 width

box "Reference Community (C1)"
actor "Patient" as PAT #blue
participant "Doc1\nAdmin" as Doc1 #lightblue
participant "Doc2\nAdmin" as Doc2 #lightblue
participant Aggregator as AGG
participant "Result\nRecord" as RES #lightgreen
end box

box "Community (C2)"
participant "Doc3\nAdmin" as Doc3 #orange
end box

Doc1 --> AGG: aggregation
Doc2 --> AGG: aggregation
Doc3 --> AGG: aggregation

Doc1 o<-->o Doc2: Same MedicalRisk entry detected
Doc2 o<-->o Doc3: Same MedicalRisk entry detected
Doc1 o<-->o Doc3: Same MedicalRisk entry detected

AGG -> RES: creates document\nVaccination Record 
PAT -> RES: Patient sees immunization status


@enduml
